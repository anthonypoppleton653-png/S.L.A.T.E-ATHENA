<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" viewBox="0 0 1200 800"
     xmlns="http://www.w3.org/2000/svg"
     role="img" aria-label="SLATE Kubernetes Architecture">

  <defs>
    <!-- Background Gradient -->
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0D1B2A;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1B3A4B;stop-opacity:1" />
    </linearGradient>

    <!-- Primary Accent Gradient -->
    <linearGradient id="primaryGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#B87333;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D4956A;stop-opacity:1" />
    </linearGradient>

    <!-- Namespace Gradient -->
    <linearGradient id="namespaceGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1B3A4B;stop-opacity:0.6" />
      <stop offset="100%" style="stop-color:#0D1B2A;stop-opacity:0.8" />
    </linearGradient>

    <!-- Status Gradients -->
    <linearGradient id="activeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#22C55E;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4ADE80;stop-opacity:1" />
    </linearGradient>

    <!-- Glow Effect -->
    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Drop Shadow -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="4"
                    flood-color="#000000" flood-opacity="0.3"/>
    </filter>

    <!-- Arrow Marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#B87333"/>
    </marker>

    <!-- Arrow Marker (Active) -->
    <marker id="arrowhead-active" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22C55E"/>
    </marker>

    <!-- Grid Pattern -->
    <pattern id="gridPattern" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#1B3A4B" stroke-width="0.5" opacity="0.3"/>
    </pattern>

    <!-- Pod Pattern -->
    <pattern id="podPattern" width="8" height="8" patternUnits="userSpaceOnUse">
      <circle cx="4" cy="4" r="1" fill="#98C1D9" opacity="0.3"/>
    </pattern>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="url(#bgGradient)"/>

  <!-- Grid Overlay -->
  <rect width="1200" height="800" fill="url(#gridPattern)" opacity="0.5"/>

  <!-- Title -->
  <text x="40" y="45"
        font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="24" font-weight="700"
        fill="#E8E2DE">SLATE Kubernetes Architecture</text>

  <!-- Ingress Layer -->
  <g class="ingress-layer">
    <rect x="100" y="70" width="1000" height="50" rx="8"
          fill="#2A2624" stroke="#B87333" stroke-width="2"/>
    <text x="600" y="100" text-anchor="middle"
          font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="14" font-weight="600"
          fill="#E8E2DE">Ingress Controller (slate.local)</text>
    <circle cx="120" cy="95" r="5" fill="#22C55E"/>
    <text x="1050" y="100" text-anchor="end"
          font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10"
          fill="#98C1D9">nginx-ingress</text>
  </g>

  <!-- Namespace Container -->
  <g class="namespace-container">
    <rect x="60" y="140" width="1080" height="620" rx="12"
          fill="url(#namespaceGradient)" stroke="#98C1D9" stroke-width="1" stroke-dasharray="5,5"/>
    <text x="80" y="165"
          font-family="'Consolas', 'JetBrains Mono', monospace" font-size="12" font-weight="600"
          fill="#98C1D9">namespace: slate</text>
  </g>

  <!-- Connection Lines -->
  <g class="connections-layer">
    <!-- Ingress to Dashboard -->
    <path d="M 300 120 L 300 180" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <!-- Ingress to Agent Router -->
    <path d="M 600 120 L 600 180" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <!-- Ingress to Autonomous -->
    <path d="M 900 120 L 900 180" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Dashboard to Ollama -->
    <path d="M 220 320 C 220 380, 180 380, 180 430" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <!-- Dashboard to ChromaDB -->
    <path d="M 380 320 C 380 380, 420 380, 420 430" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Agent Router to Dashboard -->
    <path d="M 520 250 L 420 250" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <!-- Agent Router to Workflow -->
    <path d="M 680 250 L 780 250" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Autonomous to Ollama -->
    <path d="M 820 320 C 820 500, 300 500, 300 540" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
    <!-- Autonomous to ChromaDB -->
    <path d="M 900 320 C 900 400, 500 400, 500 540" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>

    <!-- Workflow to Copilot Bridge -->
    <path d="M 900 320 L 900 430" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- GitHub Runner to Ollama -->
    <path d="M 700 690 C 500 690, 300 620, 300 600" fill="none" stroke="#B87333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
  </g>

  <!-- Components Layer -->
  <g class="components-layer" filter="url(#shadow)">

    <!-- Row 1: Frontend Services -->

    <!-- Dashboard Deployment -->
    <g class="deployment" data-id="dashboard">
      <rect x="140" y="180" width="260" height="140" rx="8"
            fill="#2A2624" stroke="#B87333" stroke-width="2"/>
      <rect x="140" y="180" width="260" height="24" rx="8"
            fill="#B87333" opacity="0.3"/>
      <text x="160" y="197"
            font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600"
            fill="#E8E2DE">Deployment: slate-dashboard</text>
      <circle cx="380" cy="192" r="5" fill="#22C55E"/>

      <!-- Service -->
      <rect x="155" y="215" width="100" height="40" rx="4"
            fill="#1E3A5F" stroke="#98C1D9" stroke-width="1"/>
      <text x="205" y="238" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10"
            fill="#98C1D9">svc:8080</text>

      <!-- Pods -->
      <g class="pods">
        <rect x="270" y="215" width="55" height="40" rx="4"
              fill="url(#podPattern)" stroke="#22C55E" stroke-width="1"/>
        <text x="297" y="238" text-anchor="middle"
              font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
              fill="#22C55E">pod-1</text>
        <rect x="330" y="215" width="55" height="40" rx="4"
              fill="url(#podPattern)" stroke="#22C55E" stroke-width="1"/>
        <text x="357" y="238" text-anchor="middle"
              font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
              fill="#22C55E">pod-2</text>
      </g>

      <!-- HPA indicator -->
      <text x="160" y="290"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#98C1D9">HPA: 2-6 replicas | WebSocket enabled</text>
      <text x="160" y="305"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#6B7280">FastAPI + D3.js Dashboard</text>
    </g>

    <!-- Agent Router Deployment -->
    <g class="deployment" data-id="agent-router">
      <rect x="440" y="180" width="260" height="140" rx="8"
            fill="#2A2624" stroke="#B87333" stroke-width="2"/>
      <rect x="440" y="180" width="260" height="24" rx="8"
            fill="#B87333" opacity="0.3"/>
      <text x="460" y="197"
            font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600"
            fill="#E8E2DE">Deployment: slate-agent-router</text>
      <circle cx="680" cy="192" r="5" fill="#22C55E"/>

      <!-- Service -->
      <rect x="455" y="215" width="100" height="40" rx="4"
            fill="#1E3A5F" stroke="#98C1D9" stroke-width="1"/>
      <text x="505" y="238" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10"
            fill="#98C1D9">svc:8081</text>

      <!-- Pods -->
      <g class="pods">
        <rect x="570" y="215" width="55" height="40" rx="4"
              fill="url(#podPattern)" stroke="#22C55E" stroke-width="1"/>
        <text x="597" y="238" text-anchor="middle"
              font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
              fill="#22C55E">pod-1</text>
        <rect x="630" y="215" width="55" height="40" rx="4"
              fill="url(#podPattern)" stroke="#22C55E" stroke-width="1"/>
        <text x="657" y="238" text-anchor="middle"
              font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
              fill="#22C55E">pod-2</text>
      </g>

      <text x="460" y="290"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#98C1D9">Task classification + routing</text>
      <text x="460" y="305"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#6B7280">ML-based task distribution</text>
    </g>

    <!-- Autonomous Loop Deployment -->
    <g class="deployment" data-id="autonomous">
      <rect x="740" y="180" width="260" height="140" rx="8"
            fill="#2A2624" stroke="#B87333" stroke-width="2"/>
      <rect x="740" y="180" width="260" height="24" rx="8"
            fill="#B87333" opacity="0.3"/>
      <text x="760" y="197"
            font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600"
            fill="#E8E2DE">Deployment: slate-autonomous</text>
      <circle cx="980" cy="192" r="5" fill="#22C55E"/>

      <!-- Service -->
      <rect x="755" y="215" width="100" height="40" rx="4"
            fill="#1E3A5F" stroke="#98C1D9" stroke-width="1"/>
      <text x="805" y="238" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10"
            fill="#98C1D9">svc:8082</text>

      <!-- Pod with GPU -->
      <g class="pods">
        <rect x="870" y="210" width="115" height="50" rx="4"
              fill="url(#podPattern)" stroke="#F59E0B" stroke-width="2"/>
        <text x="927" y="233" text-anchor="middle"
              font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
              fill="#F59E0B">pod-1 [GPU]</text>
        <polygon points="970,240 980,250 970,260" fill="#F59E0B"/>
      </g>

      <text x="760" y="290"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#98C1D9">Self-healing loop | 1 replica</text>
      <text x="760" y="305"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#6B7280">GPU access for inference</text>
    </g>

    <!-- Row 2: Backend Services -->

    <!-- Ollama StatefulSet -->
    <g class="statefulset" data-id="ollama">
      <rect x="100" y="430" width="200" height="130" rx="8"
            fill="#3D1E10" stroke="#B87333" stroke-width="2"/>
      <rect x="100" y="430" width="200" height="24" rx="8"
            fill="#B87333" opacity="0.3"/>
      <text x="120" y="447"
            font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600"
            fill="#E8E2DE">StatefulSet: ollama</text>
      <circle cx="280" cy="442" r="5" fill="#22C55E"/>

      <rect x="115" y="465" width="80" height="35" rx="4"
            fill="#1E3A5F" stroke="#98C1D9" stroke-width="1"/>
      <text x="155" y="487" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10"
            fill="#98C1D9">svc:11434</text>

      <rect x="205" y="465" width="80" height="35" rx="4"
            fill="url(#podPattern)" stroke="#F59E0B" stroke-width="2"/>
      <text x="245" y="487" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#F59E0B">pod [GPU]</text>

      <text x="120" y="525"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#98C1D9">mistral-nemo | PVC: 50Gi</text>
      <text x="120" y="540"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#6B7280">Local LLM inference</text>
    </g>

    <!-- ChromaDB StatefulSet -->
    <g class="statefulset" data-id="chromadb">
      <rect x="340" y="430" width="200" height="130" rx="8"
            fill="#1E3A5F" stroke="#B87333" stroke-width="2"/>
      <rect x="340" y="430" width="200" height="24" rx="8"
            fill="#B87333" opacity="0.3"/>
      <text x="360" y="447"
            font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600"
            fill="#E8E2DE">StatefulSet: chromadb</text>
      <circle cx="520" cy="442" r="5" fill="#22C55E"/>

      <rect x="355" y="465" width="80" height="35" rx="4"
            fill="#1E3A5F" stroke="#98C1D9" stroke-width="1"/>
      <text x="395" y="487" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10"
            fill="#98C1D9">svc:8000</text>

      <rect x="445" y="465" width="80" height="35" rx="4"
            fill="url(#podPattern)" stroke="#22C55E" stroke-width="1"/>
      <text x="485" y="487" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#22C55E">pod-0</text>

      <text x="360" y="525"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#98C1D9">Vector store | PVC: 20Gi</text>
      <text x="360" y="540"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#6B7280">RAG memory persistence</text>
    </g>

    <!-- Workflow Service -->
    <g class="deployment" data-id="workflow">
      <rect x="580" y="340" width="200" height="100" rx="8"
            fill="#2A2624" stroke="#B87333" stroke-width="2"/>
      <rect x="580" y="340" width="200" height="24" rx="8"
            fill="#B87333" opacity="0.3"/>
      <text x="600" y="357"
            font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600"
            fill="#E8E2DE">Deployment: workflow</text>
      <circle cx="760" cy="352" r="5" fill="#22C55E"/>

      <rect x="595" y="375" width="80" height="30" rx="4"
            fill="#1E3A5F" stroke="#98C1D9" stroke-width="1"/>
      <text x="635" y="394" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10"
            fill="#98C1D9">svc:8084</text>

      <text x="600" y="425"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#6B7280">Task lifecycle management</text>
    </g>

    <!-- Copilot Bridge -->
    <g class="deployment" data-id="copilot-bridge">
      <rect x="820" y="430" width="200" height="100" rx="8"
            fill="#2A2624" stroke="#B87333" stroke-width="2"/>
      <rect x="820" y="430" width="200" height="24" rx="8"
            fill="#B87333" opacity="0.3"/>
      <text x="840" y="447"
            font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600"
            fill="#E8E2DE">Deployment: copilot-bridge</text>
      <circle cx="1000" cy="442" r="5" fill="#22C55E"/>

      <rect x="835" y="465" width="80" height="30" rx="4"
            fill="#1E3A5F" stroke="#98C1D9" stroke-width="1"/>
      <text x="875" y="484" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10"
            fill="#98C1D9">svc:8083</text>

      <text x="840" y="515"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#6B7280">VS Code integration</text>
    </g>

    <!-- Row 3: GitHub Runner -->

    <!-- GitHub Runner Deployment -->
    <g class="deployment" data-id="github-runner">
      <rect x="580" y="590" width="260" height="130" rx="8"
            fill="#2A2436" stroke="#B87333" stroke-width="2"/>
      <rect x="580" y="590" width="260" height="24" rx="8"
            fill="#B87333" opacity="0.3"/>
      <text x="600" y="607"
            font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600"
            fill="#E8E2DE">Deployment: github-runner</text>
      <circle cx="820" cy="602" r="5" fill="#22C55E"/>

      <rect x="595" y="625" width="80" height="35" rx="4"
            fill="#1E3A5F" stroke="#98C1D9" stroke-width="1"/>
      <text x="635" y="647" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10"
            fill="#98C1D9">svc:9090</text>

      <rect x="690" y="625" width="70" height="35" rx="4"
            fill="url(#podPattern)" stroke="#F59E0B" stroke-width="2"/>
      <text x="725" y="647" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#F59E0B">[GPU]</text>

      <rect x="765" y="625" width="60" height="35" rx="4"
            fill="url(#podPattern)" stroke="#22C55E" stroke-width="1"/>
      <text x="795" y="647" text-anchor="middle"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#22C55E">[CPU]</text>

      <text x="600" y="685"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#98C1D9">Self-hosted runner | Prometheus metrics</text>
      <text x="600" y="700"
            font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9"
            fill="#6B7280">GPU + CPU task execution</text>
    </g>

  </g>

  <!-- Legend -->
  <g class="legend" transform="translate(1020, 600)">
    <text x="0" y="0" font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600" fill="#E8E2DE">Legend</text>

    <rect x="0" y="15" width="20" height="12" rx="2" fill="#2A2624" stroke="#B87333" stroke-width="1"/>
    <text x="28" y="25" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10" fill="#CAC4BF">Deployment</text>

    <rect x="0" y="35" width="20" height="12" rx="2" fill="#3D1E10" stroke="#B87333" stroke-width="1"/>
    <text x="28" y="45" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10" fill="#CAC4BF">AI Service</text>

    <rect x="0" y="55" width="20" height="12" rx="2" fill="#1E3A5F" stroke="#98C1D9" stroke-width="1"/>
    <text x="28" y="65" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10" fill="#CAC4BF">Service/DB</text>

    <circle cx="10" cy="85" r="5" fill="#22C55E"/>
    <text x="28" y="88" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10" fill="#CAC4BF">Healthy</text>

    <polygon points="0,100 10,110 20,100" fill="#F59E0B"/>
    <text x="28" y="108" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="10" fill="#CAC4BF">GPU Access</text>
  </g>

  <!-- Port Summary -->
  <g class="port-summary" transform="translate(1020, 170)">
    <text x="0" y="0" font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600" fill="#E8E2DE">Service Ports</text>
    <text x="0" y="18" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9" fill="#98C1D9">8080 Dashboard</text>
    <text x="0" y="32" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9" fill="#98C1D9">8081 Agent Router</text>
    <text x="0" y="46" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9" fill="#98C1D9">8082 Autonomous</text>
    <text x="0" y="60" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9" fill="#98C1D9">8083 Copilot Bridge</text>
    <text x="0" y="74" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9" fill="#98C1D9">8084 Workflow</text>
    <text x="0" y="88" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9" fill="#98C1D9">8000 ChromaDB</text>
    <text x="0" y="102" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9" fill="#98C1D9">11434 Ollama</text>
    <text x="0" y="116" font-family="'Consolas', 'JetBrains Mono', monospace" font-size="9" fill="#98C1D9">9090 Metrics</text>
  </g>

  <!-- Version Badge -->
  <g class="version-badge">
    <rect x="1090" y="40" width="90" height="24" rx="12" fill="#B87333"/>
    <text x="1135" y="56" text-anchor="middle"
          font-family="'Segoe UI', 'Inter', system-ui, sans-serif" font-size="11" font-weight="600"
          fill="#FFFFFF">v2.5</text>
  </g>

</svg>
